<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification in Imbalanced Datasets</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <!-- Backup Chart.js CDN connection -->
    <script>
        // If the first Chart.js CDN fails, try loading from an alternative source
        window.addEventListener('error', function (e) {
            if (e.target.src && e.target.src.indexOf('chart.min.js') !== -1) {
                console.log('Error loading Chart.js, trying alternative source...');
                const newScript = document.createElement('script');
                newScript.src = 'https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js';
                document.head.appendChild(newScript);
                e.preventDefault();
            }
        }, true);
    </script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #333;
            --success-color: #2ecc71;
            --white: #ffffff;
            --text-color: #333;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-gray);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--secondary-color);
            color: var(--white);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--box-shadow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo i {
            font-size: 1.8rem;
            margin-right: 10px;
            color: var(--primary-color);
        }

        .logo h1 {
            font-size: 1.5rem;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            color: var(--white);
            text-decoration: none;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary-color);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
        }

        .hamburger span {
            height: 3px;
            width: 100%;
            background-color: var(--white);
            border-radius: 3px;
        }

        main {
            margin: 2rem 0;
        }

        .hero {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 3rem 0;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            background-color: var(--white);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .section h2 {
            color: var(--secondary-color);
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        .section h3 {
            color: var(--secondary-color);
            margin: 1.5rem 0 0.5rem;
        }

        .section p {
            margin-bottom: 1rem;
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 1.5rem 0;
        }

        .card {
            flex: 1 1 300px;
            background-color: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 1rem;
            text-align: center;
        }

        .card-body {
            padding: 1rem;
        }

        .card-body ul {
            margin-left: 1.5rem;
        }

        .card-body li {
            margin-bottom: 0.5rem;
        }

        .card-body code {
            background-color: var(--light-gray);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .code-block {
            background-color: var(--secondary-color);
            color: var(--white);
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        /* Adjust SVG tables proportionally to fit page width and center */
        .table-container svg {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
        }

        table th {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 0.75rem;
        }

        table td {
            border: 1px solid var(--medium-gray);
            padding: 0.75rem;
        }

        table tr:nth-child(even) {
            background-color: var(--light-gray);
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 1.5rem 0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 1.5rem 0;
        }

        .metric-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            box-shadow: var(--box-shadow);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0.5rem 0;
        }

        .bad-metric {
            color: var(--accent-color);
        }

        .good-metric {
            color: var(--success-color);
        }

        .solution-item {
            display: flex;
            margin-bottom: 1.5rem;
            align-items: flex-start;
            background-color: rgba(52, 152, 219, 0.05);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .solution-item:hover {
            background-color: rgba(52, 152, 219, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .solution-icon {
            background-color: var(--primary-color);
            color: var(--white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 20px;
            flex-shrink: 0;
            font-size: 1.2rem;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .solution-content {
            flex-grow: 1;
        }

        .solution-content h3 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 1px solid rgba(52, 152, 219, 0.2);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        footer {
            background-color: var(--secondary-color);
            color: var(--white);
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 2rem;
            border-radius: 8px 8px 0 0;
        }

        footer ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }

        footer ul li a {
            color: var(--white);
            text-decoration: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }

            .hamburger {
                display: flex;
                position: absolute;
                top: 1rem;
                right: 1rem;
            }

            nav {
                width: 100%;
                display: none;
            }

            nav.active {
                display: block;
            }

            nav ul {
                flex-direction: column;
                width: 100%;
                margin-top: 1rem;
            }

            nav ul li {
                margin: 0;
                text-align: center;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            nav ul li a {
                display: block;
                padding: 0.75rem 0;
            }

            .flex-container {
                flex-direction: column;
            }

            .card {
                flex: 1 1 100%;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }

            h1,
            h2,
            h3 {
                font-size: 1.2em;
            }

            .hero h2 {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .card-body,
            .section,
            .code-block {
                padding: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-chart-pie"></i>
                <h1>Imbalanced Data Classification</h1>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav id="nav">
                <ul>
                    <li><a href="#introduction">Introduction</a></li>
                    <li><a href="#confusion-matrix">Confusion Matrix</a></li>
                    <li><a href="#metrics">Metrics</a></li>
                    <li><a href="#imbalance-analysis">Imbalance Analysis</a></li>
                    <li><a href="#solutions">Solutions</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h2>Classification in Imbalanced Datasets</h2>
            <p>Choosing the right metrics and optimizing performance when working with imbalanced data distributions
            </p>
        </section>

        <!-- Introduction Section -->
        <section id="introduction" class="section">
            <h2>Introduction</h2>
            <p>One of the most challenging problems in machine learning projects is working with imbalanced datasets.
                An imbalanced dataset occurs when some classes have far fewer examples than others.</p>
            <p>In this tutorial, we will examine a BERT model trained on a highly imbalanced dataset with categories A, B, C, and D.</p>
            <div class="chart-container" style="margin: 20px 0;">
                <canvas id="sampleDistribution" width="800" height="400"></canvas>
            </div>
            <div class="table-container">
                <h4>Number of Examples per Category</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Number of Examples</th>
                            <th>Data Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Category A</td>
                            <td>100</td>
                            <td>
                                <div style="background-color: rgba(52, 152, 219, 0.7); height: 20px; width: 100%;">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Category B</td>
                            <td>100</td>
                            <td>
                                <div style="background-color: rgba(52, 152, 219, 0.7); height: 20px; width: 100%;">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Category C</td>
                            <td>10</td>
                            <td>
                                <div style="background-color: rgba(231, 76, 60, 0.7); height: 20px; width: 10%;"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>Category D</td>
                            <td>10</td>
                            <td>
                                <div style="background-color: rgba(231, 76, 60, 0.7); height: 20px; width: 10%;"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>As seen from the table and chart, categories A and B have 100 examples each, while categories C and D have only 10 examples each. This imbalance significantly affects the model's performance.</p>
            <div class="section-summary"
                style="background-color: #f8f9fa; padding: 15px; border-left: 4px solid #3498db; margin: 20px 0;">
                <strong>Data Imbalance Summary:</strong> Categories A and B have 10 times more examples than categories C and D. This situation negatively affects the model's ability to correctly predict minority classes (C and D).
            </div>
        </section>

        <!-- Confusion Matrix Section -->
        <section id="confusion-matrix" class="section">
            <h2>Confusion Matrix</h2>
            <p>To evaluate the model's performance, the confusion matrix shows the actual and predicted classes.
            </p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Predicted/Actual</th>
                            <th>A (Actual)</th>
                            <th>B (Actual)</th>
                            <th>C (Actual)</th>
                            <th>D (Actual)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>A (Predicted)</strong></td>
                            <td style="background-color: rgba(46, 204, 113, 0.2)">85</td>
                            <td>7</td>
                            <td>4</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><strong>B (Predicted)</strong></td>
                            <td>10</td>
                            <td style="background-color: rgba(46, 204, 113, 0.2)">120</td>
                            <td>3</td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td><strong>C (Predicted)</strong></td>
                            <td>3</td>
                            <td>3</td>
                            <td style="background-color: rgba(46, 204, 113, 0.2)">2</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td><strong>D (Predicted)</strong></td>
                            <td>2</td>
                            <td>0</td>
                            <td>1</td>
                            <td style="background-color: rgba(46, 204, 113, 0.2)">1</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>From the confusion matrix, it can be observed that the model's performance is good for categories A and B, but poor for categories C and D.</p>
        </section>

        <!-- Category A Metric Calculation Section -->
        <!-- Metric Calculation for Category A -->
        <section id="a-category" class="section">
            <div class="table-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 480">
                    <!-- Background -->
                    <rect width="600" height="480" fill="#f8f9fa" />
                    <!-- Title -->
                    <text x="300" y="40" font-family="Arial" font-size="20" font-weight="bold" fill="#333"
                        text-anchor="middle">
                        Metric Calculation for Category A
                    </text>
                    <!-- Table headers -->
                    <rect x="100" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="105" font-family="Arial" font-size="16" fill="white"
                        text-anchor="middle">Predicted/Actual</text>
                    <rect x="200" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="250" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">A
                        (Actual)</text>
                    <rect x="300" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="350" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">B
                        (Actual)</text>
                    <rect x="400" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="450" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">C
                        (Actual)</text>
                    <rect x="500" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="550" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">D
                        (Actual)</text>

                    <!-- Prediction Rows -->
                    <!-- A (Predicted) -->
                    <rect x="100" y="130" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="165" font-family="Arial" font-size="16" fill="white" text-anchor="middle">A
                        (Predicted)</text>
                    <rect x="200" y="130" width="100" height="60" fill="#90EE90" />
                    <text x="250" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">85</text>
                    <text x="250" y="185" font-family="Arial" font-size="12" fill="#006400" text-anchor="middle">True
                        Positive</text>
                    <rect x="300" y="130" width="100" height="60" fill="#FFB6C1" />
                    <text x="350" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">7</text>
                    <text x="350" y="185" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>
                    <rect x="400" y="130" width="100" height="60" fill="#FFB6C1" />
                    <text x="450" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">4</text>
                    <text x="450" y="185" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>
                    <rect x="500" y="130" width="100" height="60" fill="#FFB6C1" />
                    <text x="550" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="550" y="185" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>

                    <!-- B (Predicted) -->
                    <rect x="100" y="190" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="225" font-family="Arial" font-size="16" fill="white" text-anchor="middle">B
                        (Predicted)</text>
                    <rect x="200" y="190" width="100" height="60" fill="#FFA07A" />
                    <text x="250" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">10</text>
                    <text x="250" y="245" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="300" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="225" font-family="Arial" font-size="16" fill="black"
                        text-anchor="middle">120</text>
                    <text x="350" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="450" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="450" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="500" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">5</text>
                    <text x="550" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>

                    <!-- C (Predicted) -->
                    <rect x="100" y="250" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="285" font-family="Arial" font-size="16" fill="white" text-anchor="middle">C
                        (Predicted)</text>
                    <rect x="200" y="250" width="100" height="60" fill="#FFA07A" />
                    <text x="250" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="250" y="305" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="300" y="250" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="350" y="305" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="250" width="100" height="60" fill="#E6E6FA" />
                    <text x="450" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="450" y="305" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="500" y="250" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="550" y="305" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>

                    <!-- D (Predicted) -->
                    <rect x="100" y="310" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="345" font-family="Arial" font-size="16" fill="white" text-anchor="middle">D
                        (Predicted)</text>
                    <rect x="200" y="310" width="100" height="60" fill="#FFA07A" />
                    <text x="250" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="250" y="365" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="300" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">0</text>
                    <text x="350" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="450" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">1</text>
                    <text x="450" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="500" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">1</text>
                    <text x="550" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                </svg>
            </div>
            <div style="font-family: Arial, sans-serif; line-height: 1.6;">
                <div style="font-size: 24px; font-weight: bold;">Metric Calculations for Category A</div>
                <h2 style="color: #34495e;">Basic Values</h2>
                <p>From the confusion matrix for category A, we obtain the following values:</p>
                <ul>
                    <li><strong>True Positive (TP)</strong> = 85<br>
                        <span style="color: #7f8c8d; font-style: italic;">Actual category A examples predicted as A</span>
                    </li>
                    <li><strong>False Positive (FP)</strong> = 7 + 4 + 3 = 14<br>
                        <span style="color: #7f8c8d; font-style: italic;">Examples not actually A, but predicted as A</span>
                        <ul>
                            <li>7 examples from B</li>
                            <li>4 examples from C</li>
                            <li>3 examples from D</li>
                        </ul>
                    </li>
                    <li><strong>False Negative (FN)</strong> = 10 + 3 + 2 = 15<br>
                        <span style="color: #7f8c8d; font-style: italic;">Examples actually A, but not predicted as A</span>
                        <ul>
                            <li>10 examples predicted as B</li>
                            <li>3 examples predicted as C</li>
                            <li>2 examples predicted as D</li>
                        </ul>
                    </li>
                    <li><strong>True Negative (TN)</strong> = 120 + 3 + 5 + 3 + 2 + 2 + 0 + 1 + 1 = 137<br>
                        <span style="color: #7f8c8d; font-style: italic;">Examples not A and not predicted as A</span>
                    </li>
                </ul>
                <h2 style="color: #34495e;">Step-by-Step Metric Calculations</h2>
                <h3 style="color: #16a085;">1. Precision</h3>
                <p>Precision = TP / (TP + FP)</p>
                <p>Precision = 85 / (85 + 14) = 85 / 99 ≈ <strong>0.859</strong> = <strong>85.9%</strong></p>
                <h3 style="color: #16a085;">2. Recall (Sensitivity)</h3>
                <p>Recall = TP / (TP + FN)</p>
                <p>Recall = 85 / (85 + 15) = 85 / 100 = <strong>0.85</strong> = <strong>85%</strong></p>
                <h3 style="color: #16a085;">3. F1 Score</h3>
                <p>F1 = 2 * (Precision * Recall) / (Precision + Recall)</p>
                <p>F1 ≈ 2 * (0.859 * 0.85) / (0.859 + 0.85) ≈ <strong>0.854</strong> = <strong>85.4%</strong></p>
            </div>
        </section>


        <!-- Category C Metric Calculation Section -->
        <!-- Metric Calculation for Category C -->
        <section id="c-category" class="section">
            <div class="table-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 480">
                    <!-- Background -->
                    <rect width="600" height="480" fill="#f8f9fa" />
                    <!-- Title -->
                    <text x="300" y="40" font-family="Arial" font-size="20" font-weight="bold" fill="#333"
                        text-anchor="middle">
                        Metric Calculation for Category C
                    </text>
                    <!-- Table headers -->
                    <rect x="100" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="105" font-family="Arial" font-size="16" fill="white"
                        text-anchor="middle">Predicted/Actual</text>
                    <rect x="200" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="250" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">A
                        (Actual)</text>
                    <rect x="300" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="350" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">B
                        (Actual)</text>
                    <rect x="400" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="450" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">C
                        (Actual)</text>
                    <rect x="500" y="70" width="100" height="60" fill="#4472c4" />
                    <text x="550" y="105" font-family="Arial" font-size="16" fill="white" text-anchor="middle">D
                        (Actual)</text>

                    <!-- Prediction Rows -->
                    <!-- A (Predicted) -->
                    <rect x="100" y="130" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="165" font-family="Arial" font-size="16" fill="white" text-anchor="middle">A
                        (Predicted)</text>
                    <rect x="200" y="130" width="100" height="60" fill="#E6E6FA" />
                    <text x="250" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">85</text>
                    <text x="250" y="185" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="300" y="130" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">7</text>
                    <text x="350" y="185" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="130" width="100" height="60" fill="#FFA07A" />
                    <text x="450" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">4</text>
                    <text x="450" y="185" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="500" y="130" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="165" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="550" y="185" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>

                    <!-- B (Predicted) -->
                    <rect x="100" y="190" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="225" font-family="Arial" font-size="16" fill="white" text-anchor="middle">B
                        (Predicted)</text>
                    <rect x="200" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="250" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">10</text>
                    <text x="250" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="300" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="225" font-family="Arial" font-size="16" fill="black"
                        text-anchor="middle">120</text>
                    <text x="350" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="190" width="100" height="60" fill="#FFA07A" />
                    <text x="450" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="450" y="245" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="500" y="190" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="225" font-family="Arial" font-size="16" fill="black" text-anchor="middle">5</text>
                    <text x="550" y="245" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>

                    <!-- C (Predicted) -->
                    <rect x="100" y="250" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="285" font-family="Arial" font-size="16" fill="white" text-anchor="middle">C
                        (Predicted)</text>
                    <rect x="200" y="250" width="100" height="60" fill="#FFB6C1" />
                    <text x="250" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="250" y="305" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>
                    <rect x="300" y="250" width="100" height="60" fill="#FFB6C1" />
                    <text x="350" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">3</text>
                    <text x="350" y="305" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>
                    <rect x="400" y="250" width="100" height="60" fill="#90EE90" />
                    <text x="450" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="450" y="305" font-family="Arial" font-size="12" fill="#006400" text-anchor="middle">True
                        Positive</text>
                    <rect x="500" y="250" width="100" height="60" fill="#FFB6C1" />
                    <text x="550" y="285" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="550" y="305" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Positive</text>

                    <!-- D (Predicted) -->
                    <rect x="100" y="310" width="100" height="60" fill="#4472c4" />
                    <text x="150" y="345" font-family="Arial" font-size="16" fill="white" text-anchor="middle">D
                        (Predicted)</text>
                    <rect x="200" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="250" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">2</text>
                    <text x="250" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="300" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="350" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">0</text>
                    <text x="350" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                    <rect x="400" y="310" width="100" height="60" fill="#FFA07A" />
                    <text x="450" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">1</text>
                    <text x="450" y="365" font-family="Arial" font-size="12" fill="#8B0000" text-anchor="middle">False
                        Negative</text>
                    <rect x="500" y="310" width="100" height="60" fill="#E6E6FA" />
                    <text x="550" y="345" font-family="Arial" font-size="16" fill="black" text-anchor="middle">1</text>
                    <text x="550" y="365" font-family="Arial" font-size="12" fill="#483D8B" text-anchor="middle">True
                        Negative</text>
                </svg>
            </div>
            <div style="font-family: Arial, sans-serif; line-height: 1.6;">
                <div style="font-size: 24px; font-weight: bold;">Metric Calculations for Category C</div>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Difficulty Level by Category
                </div>
                <ol>
                    <li><b>Category B</b>: F1 = 0.896</li>
                    <li><b>Category A</b>: F1 = 0.854</li>
                    <li><b>Category C</b>: F1 = 0.200</li>
                    <li><b>Category D</b>: F1 = 0.133</li>
                </ol>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Priority Areas for Improvement
                </div>
                <ul>
                    <li>Increase Recall value for category D</li>
                    <li>Increase Precision and Recall values for category C</li>
                </ul>
                <div>For this purpose, techniques such as oversampling, SMOTE, class weighting, and focal loss can be used.</div>
            </div>
        </section>

        <!-- Performance Metrics Section -->
        <section id="metrics" class="section">
            <h2>Performance Metrics</h2>
            <p>The basic metrics used in evaluating classification performance are: Precision, Recall, and F1 Score.</p>
            <h3>Basic Concepts</h3>
            <ul>
                <li><strong>True Positive (TP)</strong>: Correct positive predictions</li>
                <li><strong>False Positive (FP)</strong>: Incorrect positive predictions</li>
                <li><strong>False Negative (FN)</strong>: Incorrect negative predictions</li>
                <li><strong>True Negative (TN)</strong>: Correct negative predictions</li>
            </ul>
            <h3>Formulas</h3>
            <div class="code-block">
                Precision = TP / (TP + FP) <br>
                Recall = TP / (TP + FN) <br>
                F1 Score = 2 * (Precision * Recall) / (Precision + Recall)
            </div>
            <h3>Category-Based Metrics</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h4>Category A</h4>
                    <div class="metric-value good-metric">0.85</div>
                    <p>F1 Score</p>
                </div>
                <div class="metric-card">
                    <h4>Category B</h4>
                    <div class="metric-value good-metric">0.87</div>
                    <p>F1 Score</p>
                </div>
                <div class="metric-card">
                    <h4>Category C</h4>
                    <div class="metric-value bad-metric">0.20</div>
                    <p>F1 Score</p>
                </div>
                <div class="metric-card">
                    <h4>Category D</h4>
                    <div class="metric-value bad-metric">0.14</div>
                    <p>F1 Score</p>
                </div>
            </div>
            <div class="chart-container" style="margin: 20px 0;">
                <canvas id="metricsChart" width="800" height="400"></canvas>
            </div>
            <div class="table-container">
                <h4>Category-Based Performance Metrics</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1 Score</th>
                            <th>Performance Level</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Category A</strong></td>
                            <td>0.85</td>
                            <td>0.85</td>
                            <td>0.85</td>
                            <td><span style="color: #2ecc71;">✓ Good</span></td>
                        </tr>
                        <tr>
                            <td><strong>Category B</strong></td>
                            <td>0.89</td>
                            <td>0.86</td>
                            <td>0.87</td>
                            <td><span style="color: #2ecc71;">✓ Good</span></td>
                        </tr>
                        <tr>
                            <td><strong>Category C</strong></td>
                            <td>0.20</td>
                            <td>0.20</td>
                            <td>0.20</td>
                            <td><span style="color: #e74c3c;">✗ Very Low</span></td>
                        </tr>
                        <tr>
                            <td><strong>Category D</strong></td>
                            <td>0.25</td>
                            <td>0.10</td>
                            <td>0.14</td>
                            <td><span style="color: #e74c3c;">✗ Very Low</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h3>Average Metrics</h3>
            <div class="flex-container" style="margin-top: 30px;">
                <div class="card">
                    <div class="card-header">
                        <h3>Macro-average</h3>
                    </div>
                    <div class="card-body">
                        <p>Equal weight is given to each class.</p>
                        <ul>
                            <li>Precision: 0.55</li>
                            <li>Recall: 0.50</li>
                            <li>F1 Score: 0.52</li>
                        </ul>
                        <div style="margin-top: 10px; font-style: italic;">Poor performance of minority classes lowers the macro-average.</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Weighted Average</h3>
                    </div>
                    <div class="card-body">
                        <p>Weighted according to class sizes.</p>
                        <ul>
                            <li>Precision: 0.81</li>
                            <li>Recall: 0.79</li>
                            <li>F1 Score: 0.80</li>
                        </ul>
                        <div style="margin-top: 10px; font-style: italic;">Appears higher due to the effect of larger classes.</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Micro-average</h3>
                    </div>
                    <div class="card-body">
                        <p>Calculated across all examples.</p>
                        <ul>
                            <li>Precision: 0.84</li>
                            <li>Recall: 0.80</li>
                            <li>F1 Score: 0.82</li>
                        </ul>
                        <div style="margin-top: 10px; font-style: italic;">May be misleading due to the effect of larger classes.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Imbalance Analysis Section -->
        <section id="imbalance-analysis" class="section">
            <h2>Imbalance Analysis</h2>
            <p>The extreme imbalance in the dataset seriously affects model performance. In this section, the effects of imbalance are analyzed.</p>
            <h3>Main Effects of Imbalance</h3>
            <ul>
                <li><strong>Difference Between Macro and Weighted Average:</strong> A large difference indicates failure in minority classes.</li>
                <li><strong>Low Recall:</strong> Low recall for C and D shows that the model struggles to recognize these classes.</li>
                <li><strong>Error Distribution:</strong> Misclassification of C and D examples as A and B in the confusion matrix.</li>
            </ul>
            <div class="chart-container" style="margin: 20px 0;">
                <canvas id="imbalanceChart" width="800" height="400"></canvas>
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 30px 0; justify-content: space-between;">
                <div
                    style="flex: 1; min-width: 280px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c3e50;"><i class="fas fa-balance-scale"></i> Balanced Data</h4>
                    <div style="display: flex; margin: 15px 0;">
                        <div style="flex: 1; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 1; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 1; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 1; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                    </div>
                    <p>The model learns in a balanced way when all classes are equally represented.</p>
                    <div style="margin-top: 10px; font-weight: bold; color: #2ecc71;">Result: High F1 score</div>
                </div>
                <div
                    style="flex: 1; min-width: 280px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c3e50;"><i class="fas fa-exclamation-triangle"></i> Imbalanced Data</h4>
                    <div style="display: flex; margin: 15px 0; align-items: flex-end;">
                        <div style="flex: 10; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 10; background-color: #3498db; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 1; background-color: #e74c3c; height: 30px; margin: 0 2px;"></div>
                        <div style="flex: 1; background-color: #e74c3c; height: 30px; margin: 0 2px;"></div>
                    </div>
                    <p>Underrepresented classes cause bias toward majority classes.</p>
                    <div style="margin-top: 10px; font-weight: bold; color: #e74c3c;">Result: Very low F1 score for C and D</div>
                </div>
            </div>
            <h3>Root Causes of Imbalance</h3>
            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <ol>
                    <li><strong>Insufficient Learning:</strong> Few examples prevent the model from learning correctly.</li>
                    <li><strong>Generalization Difficulty:</strong> Difficult to generalize to new examples with few samples.</li>
                    <li><strong>Bias Toward Majority Classes:</strong> The model focuses on majority classes.</li>
                    <li><strong>Decision Boundary Problem:</strong> Few examples make it difficult to determine correct boundaries.</li>
                </ol>
            </div>
        </section>

        <!-- Solution Strategies Section -->
        <section id="solutions" class="section">
            <h2>Solution Strategies</h2>
            <p>Various strategies can be applied to improve model performance in imbalanced datasets:</p>
            <div class="solution-item">
                <div class="solution-icon">
                    <i class="fas fa-database"></i>
                </div>
                <div class="solution-content">
                    <h3>1. Data Balancing Techniques</h3>
                    <p>Data augmentation and multiplication techniques for underrepresented classes:</p>
                    <ul>
                        <li><strong>Oversampling:</strong> Increase the number of data points for categories C and D</li>
                        <li><strong>SMOTE:</strong> Generate synthetic examples</li>
                        <li><strong>Data Augmentation:</strong> Augmentation techniques for text data</li>
                    </ul>
                    <div class="code-block">
                        # Example of data augmentation for categories C and D<br>
                        from nlpaug.augmenter.word import SynonymAug<br><br>
                        syn_aug = SynonymAug()<br>
                        augmented_samples = []<br><br>
                        for text, label in minority_samples:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;for _ in range(50):<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aug_text = syn_aug.augment(text)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;augmented_samples.append((aug_text, label))
                    </div>
                </div>
            </div>
            <div class="solution-item">
                <div class="solution-icon">
                    <i class="fas fa-code"></i>
                </div>
                <div class="solution-content">
                    <h3>2. Model Improvement Strategies</h3>
                    <p>Optimizing the training process:</p>
                    <ul>
                        <li><strong>Class Weighting:</strong> Assigning higher weights to categories C and D</li>
                        <li><strong>Focal Loss:</strong> Loss function focusing on difficult examples</li>
                        <li><strong>Threshold Optimization:</strong> Setting low prediction thresholds</li>
                    </ul>
                    <div class="code-block">
                        # Class-weighted Focal Loss implementation<br>
                        class FocalLoss(nn.Module):<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, alpha, gamma=2.0):<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(FocalLoss, self).__init__()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.alpha = alpha<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.gamma = gamma<br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;def forward(self, inputs, targets):<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CE_loss = F.cross_entropy(inputs, targets,
                        reduction='none', weight=self.alpha)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pt = torch.exp(-CE_loss)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F_loss = (1 - pt)**self.gamma * CE_loss<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return torch.mean(F_loss)<br><br>
                        # A:1, B:1, C:25, D:25 weights<br>
                        class_weights = torch.tensor([1.0, 1.0, 25.0, 25.0])<br>
                        criterion = FocalLoss(alpha=class_weights, gamma=3.0)
                    </div>
                </div>
            </div>
            <div class="solution-item">
                <div class="solution-icon">
                    <i class="fas fa-random"></i>
                </div>
                <div class="solution-content">
                    <h3>3. Ensemble Methods</h3>
                    <p>Combining multiple models to improve performance:</p>
                    <ul>
                        <li><strong>Multiple Model Integration:</strong> Combination of models trained with different strategies</li>
                        <li><strong>Bagging and Boosting:</strong> Using AdaBoost or Gradient Boosting</li>
                        <li><strong>Cascade Classification:</strong> Staged classification approach</li>
                    </ul>
                    <div class="chart-container">
                        <canvas id="ensembleChart" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
            <div class="solution-item">
                <div class="solution-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="solution-content">
                    <h3>4. Advanced Techniques</h3>
                    <p>Deep learning and meta-learning approaches:</p>
                    <ul>
                        <li><strong>Few-Shot Learning:</strong> Learning techniques with few examples</li>
                        <li><strong>Meta-Learning:</strong> MAML or Prototypical Networks</li>
                        <li><strong>Active Learning:</strong> Selection of the most informative examples</li>
                    </ul>
                    <p>These techniques enhance the model's generalization ability, especially in situations with limited data.</p>
                </div>
            </div>
            <h3>Practical Implementation Steps</h3>
            <div
                style="background-color: #f1f8ff; padding: 25px; border-radius: 10px; border: 1px dashed #3498db; margin: 20px 0;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div
                        style="background-color: #3498db; color: white; border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h4 style="margin: 0; color: #2c3e50;">Imbalanced Dataset Improvement Plan</h4>
                </div>
                <ol style="margin-bottom: 0; padding-left: 60px;">
                    <li style="margin-bottom: 15px;">
                        <strong style="color: #3498db;">Data Augmentation:</strong> Apply 50-100 times data augmentation for categories C and D.
                        <div style="margin-top: 5px; font-size: 0.9em; color: #555;">Use backtranslation, word replacement, and SMOTE techniques.</div>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: #3498db;">Class Weighting:</strong> Use high weights (25-50x) for C and D.
                        <div style="margin-top: 5px; font-size: 0.9em; color: #555;">Give more importance to minority classes with Focal Loss.</div>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: #3498db;">Two-Stage Training:</strong> First general training, then fine-tuning focused on minority classes.
                        <div style="margin-top: 5px; font-size: 0.9em; color: #555;">Lower the learning rate (e.g., 5e-6) and train longer in the second stage.</div>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: #3498db;">Threshold Optimization:</strong> Set low threshold values for C and D (0.2-0.3).
                        <div style="margin-top: 5px; font-size: 0.9em; color: #555;">Sacrifice precision to increase recall.</div>
                    </li>
                    <li>
                        <strong style="color: #3498db;">Ensemble Models:</strong> Combine models trained with different strategies.
                        <div style="margin-top: 5px; font-size: 0.9em; color: #555;">Give higher weight (0.3-0.4) to models focused on C and D.</div>
                    </li>
                </ol>
            </div>
            <div style="background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin: 30px 0;">
                <h4 style="text-align: center; color: #2c3e50;">Expected Improvement</h4>
                <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1; min-width: 250px;">
                        <h5>Category C</h5>
                        <div style="display: flex; align-items: center; height: 40px;">
                            <div style="width: 80px;">Target:</div>
                            <div style="flex-grow: 1; height: 20px; background-color: #f0f0f0; border-radius: 4px;">
                                <div style="width: 50%; height: 100%; background-color: #2ecc71; border-radius: 4px;">
                                </div>
                            </div>
                            <div style="margin-left: 10px; font-weight: bold;">0.50</div>
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 250px;">
                        <h5>Category D</h5>
                        <div style="display: flex; align-items: center; height: 40px; margin-bottom: 15px;">
                            <div style="width: 80px;">Current:</div>
                            <div style="flex-grow: 1; height: 20px; background-color: #f0f0f0; border-radius: 4px;">
                                <div style="width: 14%; height: 100%; background-color: #e74c3c; border-radius: 4px;">
                                </div>
                            </div>
                            <div style="margin-left: 10px; font-weight: bold;">0.14</div>
                        </div>
                        <div style="display: flex; align-items: center; height: 40px;">
                            <div style="width: 80px;">Target:</div>
                            <div style="flex-grow: 1; height: 20px; background-color: #f0f0f0; border-radius: 4px;">
                                <div style="width: 45%; height: 100%; background-color: #2ecc71; border-radius: 4px;">
                                </div>
                            </div>
                            <div style="margin-left: 10px; font-weight: bold;">0.45</div>
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 250px;">
                        <h5>Macro F1 Score</h5>
                        <div style="display: flex; align-items: center; height: 40px; margin-bottom: 15px;">
                            <div style="width: 80px;">Current:</div>
                            <div style="flex-grow: 1; height: 20px; background-color: #f0f0f0; border-radius: 4px;">
                                <div style="width: 52%; height: 100%; background-color: #f39c12; border-radius: 4px;">
                                </div>
                            </div>
                            <div style="margin-left: 10px; font-weight: bold;">0.52</div>
                        </div>
                        <div style="display: flex; align-items: center; height: 40px;">
                            <div style="width: 80px;">Target:</div>
                            <div style="flex-grow: 1; height: 20px; background-color: #f0f0f0; border-radius: 4px;">
                                <div style="width: 70%; height: 100%; background-color: #2ecc71; border-radius: 4px;">
                                </div>
                            </div>
                            <div style="margin-left: 10px; font-weight: bold;">0.70</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Real World Applications Section -->
        <section id="real-world" class="section">
            <h2>Real World Applications</h2>
            <p>Imbalanced datasets appear in various fields in the real world. Here are some example scenarios:</p>
            <div class="flex-container" style="margin-top: 30px;">
                <div class="card">
                    <div class="card-header" style="background-color: #3498db;">
                        <h3><i class="fas fa-heartbeat" style="margin-right: 10px;"></i> Medical Diagnosis</h3>
                    </div>
                    <div class="card-body">
                        <p>Diagnosis of rare diseases naturally involves imbalanced datasets.</p>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #3498db;">Problem:</h4>
                        <ul>
                            <li>Very limited data for rare diseases</li>
                            <li>False negatives can have serious consequences</li>
                        </ul>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #3498db;">Solution:</h4>
                        <ul>
                            <li>Special loss functions that increase the cost of false negatives</li>
                            <li>Creating synthetic data with examples from different stages of disease</li>
                            <li>Few-shot learning techniques</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header" style="background-color: #9b59b6;">
                        <h3><i class="fas fa-shield-alt" style="margin-right: 10px;"></i> Fraud Detection</h3>
                    </div>
                    <div class="card-body">
                        <p>Financial fraud detection typically involves extremely imbalanced data.</p>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #9b59b6;">Problem:</h4>
                        <ul>
                            <li>Fraudulent transactions represent a very small percentage of total transactions</li>
                            <li>Patterns change rapidly</li>
                        </ul>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #9b59b6;">Solution:</h4>
                        <ul>
                            <li>Anomaly detection and one-class classification</li>
                            <li>Time-based sampling</li>
                            <li>Improving labeling efficiency with active learning</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header" style="background-color: #e74c3c;">
                        <h3><i class="fas fa-exclamation-triangle" style="margin-right: 10px;"></i> Fault Detection</h3>
                    </div>
                    <div class="card-body">
                        <p>Fault detection in industrial equipment is challenging due to limited fault data.</p>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #e74c3c;">Problem:</h4>
                        <ul>
                            <li>Real fault data is scarce</li>
                            <li>May not have enough examples for each fault type</li>
                        </ul>
                        <h4 style="margin-top: 15px; font-size: 1rem; color: #e74c3c;">Solution:</h4>
                        <ul>
                            <li>Creating fault data with physics-based simulations</li>
                            <li>Transfer learning</li>
                            <li>Hybrid supervised/unsupervised learning methods</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced Resources Section -->
        <section id="resources" class="section">
            <h2>Advanced Resources</h2>
            <p>You can check the following resources to learn more about classification with imbalanced datasets:</p>
            <div
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                <div
                    style="background-color: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 6px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background-color: #9b59b6; padding: 15px; color: white;">
                        <h4 style="margin: 0;"><i class="fas fa-laptop" style="margin-right: 10px;"></i> Online Courses</h4>
                    </div>
                    <div style="padding: 20px;">
                        <ul style="padding-left: 20px;">
                            <li>"Practical Solutions for Class Imbalance" - Kaggle Courses</li>
                            <li>"Advanced NLP with BERT" - TensorFlow Data and Deployment Specialization</li>
                            <li>"Anomaly Detection in Time Series Data with Keras" - Coursera</li>
                            <li>"Machine Learning with Imbalanced Datasets" - edX</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <h3>Imbalanced Data Classification Tutorial</h3>
            <p>&copy; 2025 Imbalanced Data Classification Tutorial | All Rights Reserved</p>
            <ul>
                <li><a href="#introduction"><i class="fas fa-home"></i></a></li>
                <li><a href="#confusion-matrix"><i class="fas fa-chart-pie"></i></a></li>
                <li><a href="#metrics"><i class="fas fa-calculator"></i></a></li>
                <li><a href="#solutions"><i class="fas fa-lightbulb"></i></a></li>
            </ul>
        </div>
    </footer>

    <script>
        // Mobile menu open/close
        document.getElementById('hamburger').addEventListener('click', function () {
            document.getElementById('nav').classList.toggle('active');
        });
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                // Close mobile menu
                document.getElementById('nav').classList.remove('active');
            });
        });
        // Check if Chart.js is loaded
        function isChartJsLoaded() {
            return typeof Chart !== 'undefined';
        }
        // Safe initialization of charts
        function initializeCharts() {
            if (!isChartJsLoaded()) {
                console.error('Chart.js library could not be loaded!');
                return;
            }
            // Check canvas elements
            const canvases = ['sampleDistribution', 'metricsChart', 'imbalanceChart', 'ensembleChart'];
            canvases.forEach(id => {
                const canvas = document.getElementById(id);
                if (!canvas) {
                    console.warn(`${id} canvas element not found!`);
                }
            });
            // Sample Distribution Chart
            const sampleDistCtx = document.getElementById('sampleDistribution').getContext('2d');
            new Chart(sampleDistCtx, {
                type: 'bar',
                data: {
                    labels: ['Category A', 'Category B', 'Category C', 'Category D'],
                    datasets: [{
                        label: 'Number of Examples',
                        data: [100, 100, 10, 10],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(52, 152, 219, 1)',
                            'rgba(231, 76, 60, 1)',
                            'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Distribution of Examples per Category',
                            font: { size: 16 }
                        },
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Number of Examples' } },
                        x: { title: { display: true, text: 'Categories' } }
                    }
                }
            });
            // Metrics Chart (radar)
            const metricsCtx = document.getElementById('metricsChart').getContext('2d');
            new Chart(metricsCtx, {
                type: 'radar',
                data: {
                    labels: ['Precision', 'Recall', 'F1 Score'],
                    datasets: [
                        {
                            label: 'Category A',
                            data: [0.85, 0.85, 0.85],
                            backgroundColor: 'rgba(52, 152, 219, 0.2)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(52, 152, 219, 1)'
                        },
                        {
                            label: 'Category B',
                            data: [0.89, 0.86, 0.87],
                            backgroundColor: 'rgba(46, 204, 113, 0.2)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(46, 204, 113, 1)'
                        },
                        {
                            label: 'Category C',
                            data: [0.20, 0.20, 0.20],
                            backgroundColor: 'rgba(155, 89, 182, 0.2)',
                            borderColor: 'rgba(155, 89, 182, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(155, 89, 182, 1)'
                        },
                        {
                            label: 'Category D',
                            data: [0.25, 0.10, 0.14],
                            backgroundColor: 'rgba(231, 76, 60, 0.2)',
                            borderColor: 'rgba(231, 76, 60, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(231, 76, 60, 1)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { r: { angleLines: { display: true }, suggestedMin: 0, suggestedMax: 1 } },
                    plugins: { title: { display: true, text: 'Category-Based Performance Metrics', font: { size: 16 } } }
                }
            });
            // Imbalance Chart (line)
            const imbalanceCtx = document.getElementById('imbalanceChart').getContext('2d');
            new Chart(imbalanceCtx, {
                type: 'line',
                data: {
                    labels: ['1:1', '10:1', '20:1', '50:1', '100:1'],
                    datasets: [
                        {
                            label: 'Accuracy',
                            data: [0.8, 0.85, 0.89, 0.92, 0.95],
                            backgroundColor: 'rgba(52, 152, 219, 0.2)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2,
                            tension: 0.4
                        },
                        {
                            label: 'Macro F1',
                            data: [0.78, 0.70, 0.62, 0.55, 0.52],
                            backgroundColor: 'rgba(231, 76, 60, 0.2)',
                            borderColor: 'rgba(231, 76, 60, 1)',
                            borderWidth: 2,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Performance' } },
                        x: { title: { display: true, text: 'Imbalance Ratio (Majority:Minority)' } }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Effect of Data Imbalance on Model Performance',
                            font: { size: 16 }
                        }
                    }
                }
            });
            // Ensemble Chart (bar)
            const ensembleCtx = document.getElementById('ensembleChart').getContext('2d');
            new Chart(ensembleCtx, {
                type: 'bar',
                data: {
                    labels: ['Single Model', 'Class Weighted', 'Data Balanced', 'Ensemble (5 Models)'],
                    datasets: [
                        {
                            label: 'Category A F1',
                            data: [0.85, 0.82, 0.83, 0.86],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)'
                        },
                        {
                            label: 'Category B F1',
                            data: [0.87, 0.84, 0.85, 0.88],
                            backgroundColor: 'rgba(46, 204, 113, 0.7)'
                        },
                        {
                            label: 'Category C F1',
                            data: [0.20, 0.38, 0.42, 0.58],
                            backgroundColor: 'rgba(155, 89, 182, 0.7)'
                        },
                        {
                            label: 'Category D F1',
                            data: [0.14, 0.35, 0.38, 0.52],
                            backgroundColor: 'rgba(231, 76, 60, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'F1 Score' }, max: 1 },
                        x: { title: { display: true, text: 'Model Strategy' } }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Effect of Different Strategies on Category-Based Performance',
                            font: { size: 16 }
                        }
                    }
                }
            });
        }
        window.onload = function () {
            setTimeout(initializeCharts, 500);
        };
    </script>
</body>

</html> ease;">
                    <div style="background-color: #3498db; padding: 15px; color: white;">
                        <h4 style="margin: 0;"><i class="fas fa-book" style="margin-right: 10px;"></i> Academic Papers</h4>
                    </div>
                    <div style="padding: 20px;">
                        <ul style="padding-left: 20px;">
                            <li>"Learning from Imbalanced Data" - He &amp; Garcia (2009)</li>
                            <li>"SMOTE: Synthetic Minority Over-sampling Technique" - Chawla et al.</li>
                            <li>"Focal Loss for Dense Object Detection" - Lin et al. (2017)</li>
                            <li>"Class-Balanced Loss Based on Effective Number of Samples" - Cui et al.</li>
                        </ul>
                    </div>
                </div>
                <div
                    style="background-color: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 6px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background-color: #2ecc71; padding: 15px; color: white;">
                        <h4 style="margin: 0;"><i class="fas fa-code" style="margin-right: 10px;"></i> Code Libraries</h4>
                    </div>
                    <div style="padding: 20px;">
                        <ul style="padding-left: 20px;">
                            <li>imbalanced-learn (Python)</li>
                            <li>TensorFlow Addons</li>
                            <li>nlpaug</li>
                            <li>PyTorch SMOTE</li>
                        </ul>
                    </div>
                </div>
                <div
                    style="background-color: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 6px rgba(0,0,0,0.1); transition: all 0.3sd; margin-top: 10px;">Basic Values</div>
                <div>Values obtained from the confusion matrix for category C:</div>
                <ul>
                    <li><b>True Positive (TP)</b> = 2</li>
                    <li><b>False Positive (FP)</b> = 3 + 3 + 2 = 8
                        <ul>
                            <li>3 examples from A</li>
                            <li>3 examples from B</li>
                            <li>2 examples from D</li>
                        </ul>
                    </li>
                    <li><b>False Negative (FN)</b> = 4 + 3 + 1 = 8
                        <ul>
                            <li>4 examples predicted as A</li>
                            <li>3 examples predicted as B</li>
                            <li>1 example predicted as D</li>
                        </ul>
                    </li>
                    <li><b>True Negative (TN)</b> = 233</li>
                </ul>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Step-by-Step Metric Calculations</div>
                <div style="font-size: 18px; font-weight: bold; margin-top: 10px;">1. Precision</div>
                <div><b>Formula:</b> Precision = TP / (TP + FP)</div>
                <div><b>Calculation:</b> 2 / (2 + 8) = 0.200 = <b>20.0%</b></div>
                <div style="font-size: 18px; font-weight: bold; margin-top: 10px;">2. Recall (Sensitivity)</div>
                <div><b>Formula:</b> Recall = TP / (TP + FN)</div>
                <div><b>Calculation:</b> 2 / (2 + 8) = 0.200 = <b>20.0%</b></div>
                <div style="font-size: 18px; font-weight: bold; margin-top: 10px;">3. F1 Score</div>
                <div><b>Formula:</b> F1 = 2 * (Precision * Recall) / (Precision + Recall)</div>
                <div><b>Calculation:</b> 2 * (0.200 * 0.200) / (0.200 + 0.200) = 0.200 = <b>20.0%</b></div>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Result</div>
                <ul>
                    <li>Precision: <b>0.200</b> (20.0%)</li>
                    <li>Recall: <b>0.200</b> (20.0%)</li>
                    <li>F1 Score: <b>0.200</b> (20.0%)</li>
                </ul>
                <div>These values indicate that the model is failing to detect category C effectively.</div>
            </div>
        </section>


        <!-- Comparison for All Categories Section -->
        <section id="all-categories" class="section">
            <div class="table-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
                    <!-- Background -->
                    <rect width="800" height="600" fill="#f8f9fa" />
                    <!-- Title -->
                    <text x="400" y="40" font-family="Arial" font-size="24" font-weight="bold" fill="#333"
                        text-anchor="middle">
                        Metric Comparison for All Categories
                    </text>
                    <!-- Chart Area -->
                    <rect x="100" y="100" width="600" height="350" fill="white" stroke="#ddd" stroke-width="1" />
                    <!-- Grid Lines -->
                    <line x1="100" y1="100" x2="100" y2="450" stroke="#ddd" stroke-width="1" />
                    <line x1="100" y1="450" x2="700" y2="450" stroke="#ddd" stroke-width="1" />
                    <line x1="100" y1="370" x2="700" y2="370" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
                    <line x1="100" y1="290" x2="700" y2="290" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
                    <line x1="100" y1="210" x2="700" y2="210" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
                    <line x1="100" y1="130" x2="700" y2="130" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
                    <!-- Y-Axis Labels -->
                    <text x="95" y="450" font-family="Arial" font-size="12" fill="#666" text-anchor="end">0.0</text>
                    <text x="95" y="370" font-family="Arial" font-size="12" fill="#666" text-anchor="end">0.2</text>
                    <text x="95" y="290" font-family="Arial" font-size="12" fill="#666" text-anchor="end">0.4</text>
                    <text x="95" y="210" font-family="Arial" font-size="12" fill="#666" text-anchor="end">0.6</text>
                    <text x="95" y="130" font-family="Arial" font-size="12" fill="#666" text-anchor="end">0.8</text>
                    <text x="95" y="100" font-family="Arial" font-size="12" fill="#666" text-anchor="end">1.0</text>
                    <!-- X-Axis and Y-Axis Titles -->
                    <text x="400" y="490" font-family="Arial" font-size="16" fill="#333"
                        text-anchor="middle">Categories</text>
                    <text x="50" y="275" font-family="Arial" font-size="16" fill="#333" text-anchor="middle"
                        transform="rotate(-90,50,275)">
                        Value
                    </text>
                    <!-- Category A Bars -->
                    <rect x="150" y="132" width="40" height="318" fill="#3498db" />
                    <rect x="195" y="132" width="40" height="318" fill="#2ecc71" />
                    <rect x="240" y="132" width="40" height="318" fill="#9b59b6" />
                    <text x="195" y="470" font-family="Arial" font-size="14" fill="#333" text-anchor="middle">A</text>
                    <text x="195" y="485" font-family="Arial" font-size="12" fill="#666" text-anchor="middle">(100
                        examples)</text>
                    <!-- Category B Bars -->
                    <rect x="320" y="119" width="40" height="331" fill="#3498db" />
                    <rect x="365" y="96" width="40" height="354" fill="#2ecc71" />
                    <rect x="410" y="124" width="40" height="326" fill="#9b59b6" />
                    <text x="365" y="470" font-family="Arial" font-size="14" fill="#333" text-anchor="middle">B</text>
                    <text x="365" y="485" font-family="Arial" font-size="12" fill="#666" text-anchor="middle">(100
                        examples)</text>
                    <!-- Category C Bars -->
                    <rect x="490" y="370" width="40" height="80" fill="#3498db" />
                    <rect x="535" y="370" width="40" height="80" fill="#2ecc71" />
                    <rect x="580" y="370" width="40" height="80" fill="#9b59b6" />
                    <text x="535" y="470" font-family="Arial" font-size="14" fill="#333" text-anchor="middle">C</text>
                    <text x="535" y="485" font-family="Arial" font-size="12" fill="#666" text-anchor="middle">(10
                        examples)</text>
                    <!-- Category D Bars -->
                    <rect x="660" y="362" width="40" height="88" fill="#3498db" />
                    <rect x="705" y="414" width="40" height="36" fill="#2ecc71" />
                    <rect x="750" y="396" width="40" height="54" fill="#9b59b6" />
                    <text x="705" y="470" font-family="Arial" font-size="14" fill="#333" text-anchor="middle">D</text>
                    <text x="705" y="485" font-family="Arial" font-size="12" fill="#666" text-anchor="middle">(10
                        examples)</text>
                    <!-- Bar Values -->
                    <!-- Category A -->
                    <text x="170" y="125" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.86</text>
                    <text x="215" y="125" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.85</text>
                    <text x="260" y="125" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.85</text>
                    <!-- Category B -->
                    <text x="340" y="112" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.87</text>
                    <text x="385" y="89" font-family="Arial" font-size="12" fill="#333" text-anchor="middle">0.92</text>
                    <text x="430" y="117" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.90</text>
                    <!-- Category C -->
                    <text x="510" y="363" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.20</text>
                    <text x="555" y="363" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.20</text>
                    <text x="600" y="363" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.20</text>
                    <!-- Category D -->
                    <text x="680" y="355" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.25</text>
                    <text x="725" y="407" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.09</text>
                    <text x="770" y="389" font-family="Arial" font-size="12" fill="#333"
                        text-anchor="middle">0.13</text>
                    <!-- Legend -->
                    <rect x="270" y="520" width="20" height="20" fill="#3498db" />
                    <text x="300" y="535" font-family="Arial" font-size="14" fill="#333"
                        text-anchor="start">Precision</text>
                    <rect x="370" y="520" width="20" height="20" fill="#2ecc71" />
                    <text x="400" y="535" font-family="Arial" font-size="14" fill="#333"
                        text-anchor="start">Recall</text>
                    <rect x="470" y="520" width="20" height="20" fill="#9b59b6" />
                    <text x="500" y="535" font-family="Arial" font-size="14" fill="#333" text-anchor="start">F1
                        Score</text>
                    <!-- Arrows and Explanation -->
                    <line x1="240" y1="560" x2="660" y2="560" stroke="#e74c3c" stroke-width="2" />
                    <polygon points="660,560 650,555 650,565" fill="#e74c3c" />
                    <text x="270" y="555" font-family="Arial" font-size="12" fill="#e74c3c" text-anchor="start">
                        High number of examples
                    </text>
                    <text x="610" y="555" font-family="Arial" font-size="12" fill="#e74c3c" text-anchor="end">
                        Low number of examples
                    </text>
                    <text x="450" y="575" font-family="Arial" font-size="14" font-style="italic" fill="#333"
                        text-anchor="middle">
                        Performance decreases as the number of examples decreases
                    </text>
                </svg>
            </div>
            <div style="font-family: Arial, sans-serif; line-height: 1.6;">
                <div style="font-size: 24px; font-weight: bold;">Calculated Metrics for All Categories - Summary Table
                </div>
                <div>Summary table of precision, recall, and F1 scores calculated for each category:</div>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Metrics by Category</div>
                <table border="1" cellpadding="5" style="border-collapse: collapse; width: 100%; text-align: center;">
                    <tr>
                        <th>Category</th>
                        <th>Number of Examples</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>F1 Score</th>
                        <th>TP</th>
                        <th>FP</th>
                        <th>FN</th>
                        <th>TN</th>
                    </tr>
                    <tr>
                        <td>A</td>
                        <td>100</td>
                        <td>0.859</td>
                        <td>0.85</td>
                        <td>0.854</td>
                        <td>85</td>
                        <td>14</td>
                        <td>15</td>
                        <td>137</td>
                    </tr>
                    <tr>
                        <td>B</td>
                        <td>100</td>
                        <td>0.870</td>
                        <td>0.923</td>
                        <td>0.896</td>
                        <td>120</td>
                        <td>18</td>
                        <td>10</td>
                        <td>103</td>
                    </tr>
                    <tr>
                        <td>C</td>
                        <td>10</td>
                        <td>0.200</td>
                        <td>0.20</td>
                        <td>0.200</td>
                        <td>2</td>
                        <td>8</td>
                        <td>8</td>
                        <td>233</td>
                    </tr>
                    <tr>
                        <td>D</td>
                        <td>10</td>
                        <td>0.250</td>
                        <td>0.091</td>
                        <td>0.133</td>
                        <td>1</td>
                        <td>3</td>
                        <td>10</td>
                        <td>237</td>
                    </tr>
                </table>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Calculation Details and Formulas
                </div>
                <div><b>Precision:</b> TP / (TP + FP)</div>
                <div><b>Recall (Sensitivity):</b> TP / (TP + FN)</div>
                <div><b>F1 Score:</b> 2 * (Precision * Recall) / (Precision + Recall)</div>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Average Metrics</div>
                <table border="1" cellpadding="5" style="border-collapse: collapse; width: 100%; text-align: center;">
                    <tr>
                        <th>Average Type</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>F1 Score</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Macro-average</td>
                        <td>0.545</td>
                        <td>0.516</td>
                        <td>0.521</td>
                        <td>Gives equal weight to each class.</td>
                    </tr>
                    <tr>
                        <td>Weighted Average</td>
                        <td>0.807</td>
                        <td>0.789</td>
                        <td>0.798</td>
                        <td>Weighted by the number of examples in each class.</td>
                    </tr>
                    <tr>
                        <td>Micro-average</td>
                        <td>0.840</td>
                        <td>0.800</td>
                        <td>0.820</td>
                        <td>Calculated across all classes.</td>
                    </tr>
                </table>
                <div style="font-size: 20px; font-weight: bold; margin-top: 10px;">Impact of Data Imbalance</div>
                <div>
                    <ul>
                        <li>A and B (100 examples): F1 ≈ 0.85-0.90</li>
                        <li>C and D (10 examples): F1 ≈ 0.13-0.20</li>
                    </ul>
                </div>
                <div style="font-size: 20px; font-weight: bol