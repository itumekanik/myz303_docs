<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Regression Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: #f4f4f4;
            padding: 20px;
            text-align: center;
            max-width: 1200px;
            margin: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        .panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        th {
            background: #3498db;
            color: white;
        }

        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            padding: 10px;
            border: none;
            cursor: pointer;
            margin: 5px;
            border-radius: 5px;
            font-size: 14px;
        }

        .add-btn { background: #2ecc71; color: white; }
        .add-btn:hover { background: #27ae60; }

        .delete-btn { background: #e74c3c; color: white; }
        .delete-btn:hover { background: #c0392b; }

        .clear-btn { background: #f39c12; color: white; }
        .clear-btn:hover { background: #e67e22; }

        .run-btn { background: #3498db; color: white; }
        .run-btn:hover { background: #2980b9; }

        .results {
            text-align: left;
            margin-top: 15px;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: bold;
        }

        .chart-container {
            width: 100%;
            margin-top: 20px;
        }

        canvas {
            width: 100%;
            max-width: 800px;
            height: 400px;
        }

        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

    <h1>Interactive Linear Regression Calculator</h1>

    <div class="container">
        <div class="panel">
            <h2>Data Input</h2>
            <table>
                <thead>
                    <tr>
                        <th>x (Independent)</th>
                        <th>y (Dependent)</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="data-body"></tbody>
            </table>
            <button class="add-btn" onclick="addRow()">Add Data Point</button>
            <button class="clear-btn" onclick="clearData()">Clear All</button>
            <button class="run-btn" onclick="runRegression()">Run Regression</button>
        </div>

        <div class="panel">
            <h2>Regression Results</h2>
            <p class="formula" id="equation">y = β₀ + β₁x</p>
            <div class="results">
                <p>Intercept (β₀): <strong id="beta0">-</strong></p>
                <p>Slope (β₁): <strong id="beta1">-</strong></p>
            </div>
        </div>
    </div>

    <div class="chart-container">
        <canvas id="regressionChart"></canvas>
    </div>

    <script>
        let data = [
            { x: 1, y: 2 },
            { x: 2, y: 3.5 },
            { x: 3, y: 5 },
            { x: 4, y: 6.2 },
            { x: 5, y: 7.8 },
            { x: 6, y: 9.5 }
        ];

        let chart;

        function updateTable() {
            let tbody = document.getElementById('data-body');
            tbody.innerHTML = '';

            data.forEach((point, index) => {
                let row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="number" value="${point.x}" onchange="updateValue(${index}, 'x', this.value)"></td>
                    <td><input type="number" value="${point.y}" onchange="updateValue(${index}, 'y', this.value)"></td>
                    <td><button class="delete-btn" onclick="removeRow(${index})">Delete</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateValue(index, key, value) {
            data[index][key] = parseFloat(value);
        }

        function addRow() {
            data.push({ x: 0, y: 0 });
            updateTable();
        }

        function removeRow(index) {
            data.splice(index, 1);
            updateTable();
        }

        function clearData() {
            data = [];
            updateTable();
            chart.destroy();
        }

        function runRegression() {
            if (data.length < 2) {
                alert("At least two points required.");
                return;
            }

            let xMin = Math.min(...data.map(p => p.x));
            let xMax = Math.max(...data.map(p => p.x));

            let xMean = data.reduce((sum, p) => sum + p.x, 0) / data.length;
            let yMean = data.reduce((sum, p) => sum + p.y, 0) / data.length;

            let numerator = data.reduce((sum, p) => sum + (p.x - xMean) * (p.y - yMean), 0);
            let denominator = data.reduce((sum, p) => sum + Math.pow(p.x - xMean, 2), 0);
            let beta1 = numerator / denominator;
            let beta0 = yMean - beta1 * xMean;

            document.getElementById('equation').textContent = `y = ${beta0.toFixed(2)} + ${beta1.toFixed(2)}x`;
            document.getElementById('beta0').textContent = beta0.toFixed(4);
            document.getElementById('beta1').textContent = beta1.toFixed(4);

            drawChart(beta0, beta1, xMin, xMax);
        }

        function drawChart(beta0, beta1, xMin, xMax) {
            if (chart) chart.destroy();

            let ctx = document.getElementById('regressionChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Data Points',
                            data: data,
                            backgroundColor: 'blue'
                        },
                        {
                            label: 'Regression Line',
                            data: [
                                { x: xMin, y: beta0 + beta1 * xMin },
                                { x: xMax, y: beta0 + beta1 * xMax }
                            ],
                            type: 'line',
                            borderColor: 'red',
                            borderWidth: 2,
                            fill: false
                        }
                    ]
                },
                options: {
                    scales: {
                        x: { type: 'linear', position: 'bottom' },
                        y: { type: 'linear' }
                    }
                }
            });
        }

        updateTable();
        runRegression();
    </script>

</body>
</html>
